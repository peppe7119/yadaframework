<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>YadaJobScheduler &#8212; Yada Framework master documentation</title>
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     'master',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../../index.html">
          Yada Framework</a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro.html">     intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorial.html">     tutorial</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">YadaJobScheduler</a><ul>
<li><a class="reference internal" href="#methods">Methods</a><ul>
<li><a class="reference internal" href="#getjobinstance">getJobInstance</a></li>
<li><a class="reference internal" href="#getjobinstanceifrunning">getJobInstanceIfRunning</a></li>
<li><a class="reference internal" href="#init">init</a></li>
<li><a class="reference internal" href="#interruptjob">interruptJob</a></li>
<li><a class="reference internal" href="#id1">interruptJob</a></li>
<li><a class="reference internal" href="#jobisrunning">jobIsRunning</a></li>
<li><a class="reference internal" href="#run">run</a></li>
<li><a class="reference internal" href="#runjob">runJob</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../../../_sources/javadoc/net/yadaframework/components/YadaJobScheduler.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<form action="../../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="yadajobscheduler">
<h1>YadaJobScheduler<a class="headerlink" href="#yadajobscheduler" title="Permalink to this headline">¶</a></h1>
<dl class="type">
<dt id="net.yadaframework.components.YadaJobScheduler">
 class <code class="descname">YadaJobScheduler</code> implements <a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html" title="java.lang.Runnable">Runnable</a><a class="headerlink" href="#net.yadaframework.components.YadaJobScheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes care of running and managing YadaJob instances. It is invoked every config/yada/jobSchedulerPeriodMillis milliseconds. At every invocation, it starts all jobs that have a start date that falls in the next period. This means that the jobSchedulerPeriodMillis is the minimum resolution for job scheduling. So if the jobSchedulerPeriodMillis is set to 9000 it means that the real start time of a job can be anticipated by 9 seconds from the expected start time. It is up to the job itself to delay start if needed.</p>
<p><strong>See also:</strong> <a class="reference internal" href="../core/YadaConfiguration.html#net.yadaframework.core.YadaConfiguration.getYadaJobSchedulerPeriod()" title="net.yadaframework.core.YadaConfiguration.getYadaJobSchedulerPeriod()"><code class="xref java java-ref docutils literal"><span class="pre">YadaConfiguration.getYadaJobSchedulerPeriod()</span></code></a></p>
</dd></dl>

<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<div class="section" id="getjobinstance">
<h3>getJobInstance<a class="headerlink" href="#getjobinstance" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="net.yadaframework.components.YadaJobScheduler.getJobInstance(Long)">
public <a class="reference internal" href="../persistence/entity/YadaJob.html#net.yadaframework.persistence.entity.YadaJob" title="net.yadaframework.persistence.entity.YadaJob">YadaJob</a> <code class="descname">getJobInstance</code><span class="sig-paren">(</span><a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="java.lang.Long">Long</a><em> id</em><span class="sig-paren">)</span><a class="headerlink" href="#net.yadaframework.components.YadaJobScheduler.getJobInstance(Long)" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of a YadaJob. The instance is freshly loaded from the database if no other thread already holds a reference to it, otherwise the instance is shared among threads. It is thus possible for concurrent threads to modify the same entity (= table row) without incurring in a concurrent modification exception. The instance is removed from the cache when no one holds a reference to it anymore. The typical scenario is when a job is already running (an instance has been cached by the scheduler) and a user from the web interface changes its name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> – the job id</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a YadaJob instance that can be freely modified and saved</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="getjobinstanceifrunning">
<h3>getJobInstanceIfRunning<a class="headerlink" href="#getjobinstanceifrunning" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="net.yadaframework.components.YadaJobScheduler.getJobInstanceIfRunning(Long)">
public <a class="reference internal" href="../persistence/entity/YadaJob.html#net.yadaframework.persistence.entity.YadaJob" title="net.yadaframework.persistence.entity.YadaJob">YadaJob</a> <code class="descname">getJobInstanceIfRunning</code><span class="sig-paren">(</span><a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="java.lang.Long">Long</a><em> id</em><span class="sig-paren">)</span><a class="headerlink" href="#net.yadaframework.components.YadaJobScheduler.getJobInstanceIfRunning(Long)" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of YadaJob only if the job is currently running.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the instance or null</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="init">
<h3>init<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="net.yadaframework.components.YadaJobScheduler.init()">
 void <code class="descname">init</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#net.yadaframework.components.YadaJobScheduler.init()" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="interruptjob">
<h3>interruptJob<a class="headerlink" href="#interruptjob" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="net.yadaframework.components.YadaJobScheduler.interruptJob(Long)">
 boolean <code class="descname">interruptJob</code><span class="sig-paren">(</span><a class="reference external" href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="java.lang.Long">Long</a><em> yadaJobId</em><span class="sig-paren">)</span><a class="headerlink" href="#net.yadaframework.components.YadaJobScheduler.interruptJob(Long)" title="Permalink to this definition">¶</a></dt>
<dd><p>Interrupt the job and make it ACTIVE</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>yadaJob</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">true if the job could be interrupted</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id1">
<h3>interruptJob<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="net.yadaframework.components.YadaJobScheduler.interruptJob(YadaJob)">
 boolean <code class="descname">interruptJob</code><span class="sig-paren">(</span><a class="reference internal" href="../persistence/entity/YadaJob.html#net.yadaframework.persistence.entity.YadaJob" title="net.yadaframework.persistence.entity.YadaJob">YadaJob</a><em> yadaJob</em><span class="sig-paren">)</span><a class="headerlink" href="#net.yadaframework.components.YadaJobScheduler.interruptJob(YadaJob)" title="Permalink to this definition">¶</a></dt>
<dd><p>Interrupt the job and make it ACTIVE</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>yadaJob</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">true if the job could be interrupted</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="jobisrunning">
<h3>jobIsRunning<a class="headerlink" href="#jobisrunning" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="net.yadaframework.components.YadaJobScheduler.jobIsRunning(YadaJob)">
 boolean <code class="descname">jobIsRunning</code><span class="sig-paren">(</span><a class="reference internal" href="../persistence/entity/YadaJob.html#net.yadaframework.persistence.entity.YadaJob" title="net.yadaframework.persistence.entity.YadaJob">YadaJob</a><em> yadaJob</em><span class="sig-paren">)</span><a class="headerlink" href="#net.yadaframework.components.YadaJobScheduler.jobIsRunning(YadaJob)" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if the job is actually running in a thread</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>yadaJob</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="run">
<h3>run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="net.yadaframework.components.YadaJobScheduler.run()">
public void <code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#net.yadaframework.components.YadaJobScheduler.run()" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="runjob">
<h3>runJob<a class="headerlink" href="#runjob" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="net.yadaframework.components.YadaJobScheduler.runJob(YadaJob)">
 void <code class="descname">runJob</code><span class="sig-paren">(</span><a class="reference internal" href="../persistence/entity/YadaJob.html#net.yadaframework.persistence.entity.YadaJob" title="net.yadaframework.persistence.entity.YadaJob">YadaJob</a><em> yadaJobToWire</em><span class="sig-paren">)</span><a class="headerlink" href="#net.yadaframework.components.YadaJobScheduler.runJob(YadaJob)" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the job now. The job must set its own state to DISABLED or PAUSED when failed, otherwise it is set to ACTIVE.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>yadaJob</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Cristian Ghezzi.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>